"use strict";jQuery(function(m){m(".js-booking-mask").submit(function(t){if(t.preventDefault(),m(".location-select").hasClass("active")){m(this).data("url");for(var t=m(this).data("site"),e=m(this).find('input[name="arrival"]').val(),a=m(this).find('input[name="departure"]').val(),e=dayjs(e).format("YYYY-MM-DD"),a=dayjs(a).format("YYYY-MM-DD"),r=m(this).find('input[name="rooms"]').val(),s=m(this).find('input[name="adults"]').val(),n=(m(this).data("property-id"),m(".js-booking-toggle").toggleClass("menu-open"),[]),i=Math.floor(s/r),o=s%r,l=0;l<r;l++)n.push(i+(l<o?1:0));s=new URLSearchParams({rooms:r}),s=(s.set("adult",n.join(",")),s.toString());console.log(t),window.location.href="clerkenwell"==t?"https://reservations.thezetter.com/?arrive="+e+"&brand=ZETTER&chain=34634&currency=GBP&depart="+a+"&hotel=35181&level=chain&locale=en-US&productcurrency=GBP&"+s+"&theme=Zetter":"marylebone"==t?"https://reservations.thezetter.com/?arrive="+e+"&brand=ZETTER&chain=34634&currency=GBP&depart="+a+"&hotel=35183&level=chain&locale=en-US&productcurrency=GBP&"+s+"&theme=Zetter":"marrables"==t?"https://reservations.marrableshotel.com/?arrive="+e+"&chain=34634&level=hotel&hotel=35182&currency=GBP&depart="+a+"&"+s:"https://reservations.thezetter.com/?arrive="+e+"&brand=ZETTER&chain=34634&currency=GBP&depart="+a+"&level=chain&theme=Zetter"}else m(".location-select").addClass("error")}),m(".js-location-selector-up a").click(function(t){t.preventDefault();var t=m(this).attr("data-url"),e=m(this).attr("data-site"),a=m(this).attr("data-property-id"),r=m(this).text();m(".location-display").text(r),null==a&&""==a||m(this).parents("form").find("button[type=submit").removeClass("disabled"),m(this).parents("form").attr("data-url",t),m(this).parents("form").attr("data-property-id",a),m(this).parents("form").attr("data-site",e)}),m(".js-datepicker-trigger").flatpickr({mode:"range",minDate:"today",showMonths:"2",locale:{firstDayOfWeek:1},onClose:function(t){var e=t[0],t=t[1];m(".js-check-in-display").html(dayjs(e).format("ddd D MMM")),m(".js-check-out-display").html(dayjs(t).format("ddd D MMM")),m(".js-arrive-input").val(dayjs(e).format("YYYY-MM-DD")),m(".js-departure-input").val(dayjs(t).format("YYYY-MM-DD"))}}),m(".js-arrive-input").change(function(){var t=new Date(m(this).val()),e=dayjs(t).add(1,"day").format("YYYY-MM-DD");m(this).parents("form").find('input[name="departure"]').val(e),m(this).parents("form").find('input[name="departure"]').attr({min:dayjs(e).format("YYYY-MM-DD")}),m(this).parents("form").find(".js-check-in-display").html(dayjs(t).format("ddd D MMM")),m(this).parents("form").find(".js-check-out-display").html(dayjs(e).format("ddd D MMM"))}),m(".js-departure-input").change(function(){var t=new Date(this.value);m(this).parents("form").find('input[name="departure"]').val(dayjs(t).format("YYYY-MM-DD")),m(this).parents("form").find('input[name="departure"]').focus(),m(this).parents("form").find(".js-check-out-display").html(dayjs(t).format("ddd D MMM"))}),m(".native-depart").change(function(){var t=new Date(this.value);m(this).parents("form").find('input[name="departure"]').val(dayjs(t).format("YYYY-MM-DD")),m(this).parents("form").find('input[name="departure"]').focus(),m(this).parents("form").find(".js-check-out-display").html(dayjs(t).format("ddd D MMM"))}),m(".selector-control").on("click",function(t){t.preventDefault();var e,a,r,s,t=m(this),n=t.parents(".selector-wrap").attr("data-max"),i=t.parents(".selector-wrap").attr("data-min"),o=t.parents(".selector-wrap").find(".selector-value").text(),o=parseInt(o),l=Number(i)+Number(1),d=Number(n)-Number(1),p=(t.hasClass("plus")?(e=n<=!o?o:o<n?(t.parents(".selector-wrap").find(".minus").removeClass("disabled"),parseFloat(o)+1):n,o==d&&t.parents(".selector-wrap").find(".plus").addClass("disabled")):(i<o?(e=parseFloat(o)-1,t.parents(".selector-wrap").find(".plus").removeClass("disabled")):e=i,o==l&&t.parents(".selector-wrap").find(".minus").addClass("disabled")),t.parents(".selector-wrap").find(".selector-value").text(e),t.parents(".selector-wrap").find("input").val(e),t.parents(".select-inner").find('input[name="rooms"]').val(),t.parents(".select-inner").find('input[name="adults"]').val(),t.parents(".select-inner").find('input[name="children"]').val(),0),c=(t.parents("form").find(".js-count-rooms").each(function(){a=m(this).val(),p=+p+ +a}),1<p?m(".js-rooms-display").text(p+" Rooms"):m(".js-rooms-display").text(p+" Room"),0),u=(t.parents("form").find(".js-count-adults").each(function(){r=m(this).val(),c=+c+ +r}),1<c?m(".js-adults-display").text(c+" Adults"):m(".js-adults-display").text(c+" Adult"),0);t.parents("form").find(".js-count-children").each(function(){s=m(this).val(),u=+u+ +s}),1<u||0===u?m(".js-children-display").text(u+" Children"):m(".js-children-display").text(u+" Child")}),m(".js-rooms-guests-trigger, .rooms-guests-close").click(function(t){t.preventDefault(),m(this).parents("form").find(".rooms-guests-select").toggleClass("active")})});